<!doctype html><html lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Avalonia UI в Ubuntu. Взаимодействие с элементами управления | Ghost Basenji</title><meta name=description content="Записки начинающего программиста"><meta property="og:type" content="article"><meta property="og:title" content="Avalonia UI в Ubuntu. Взаимодействие с элементами управления"><meta property="og:description" content="Записки начинающего программиста"><meta property="og:url" content="https://ghostbasenji.github.io/post/avalonia-v-ubuntu-vzaimodeystvie-ui/"><meta property="og:site_name" content="Ghost Basenji"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Avalonia UI в Ubuntu. Взаимодействие с элементами управления"><meta name=twitter:description content="Записки начинающего программиста"><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/monokailight.css><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=stylesheet href=/css/404.css><link rel=icon href=/images/favicon.ico type=image/x-icon><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script></head><body><style>:root{--content-width:1000px;--sidebar-width:340px;--sidebar-padding:32px;--logo-size:120px}</style><div class=layout><main class=content><article class=post-single><header class=post-header><h1 class=post-title>Avalonia UI в Ubuntu. Взаимодействие с элементами управления</h1><div class=post-meta>17 Sep 2025</div></header><div class=post-content><p>Итак, вышел второй пост из серии “Avalonia UI в Ubuntu”. В этом посте узнаем, как взаимодействовать с элементами управления (Controls), продолжая использовать наше приложение, созданное в <a href=https://ghostbasenji.github.io/post/avalonia-v-ubuntu-nachalo/>предыдущем посте</a>.</p><h3 id=добавление-элементов-управления>Добавление элементов управления</h3><p>Первым делом открываем файл MainWindow.xaml проекта MyApp. В нем находим и удаляем текст “Welcome to Avalonia!”. А потом напишем следующий код:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;StackPanel</span> <span class=na>Orientation=</span><span class=s>&#34;Vertical&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/StackPanel&gt;</span>
</span></span></code></pre></div><p>Вышеприведенный код создает <strong>StackPanel</strong> (отвечает за разметку) с вертикальной ориентацией. А это приведет к тому, что элементы управления будут располагаться один за другим, так что на данный момент можем не беспокоиться об их расположении.
Далее добавляем в StackPanel следующие элементы управления: <strong>TextBlock</strong> с именем <em>NameLabel</em>, <strong>TextBox</strong> с <em>NameTextBox</em>, <strong>Button</strong> c <em>GreetButton</em> и еще один <strong>TextBlock</strong> с <em>MessageLabel</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;TextBlock</span> <span class=na>Name=</span><span class=s>&#34;NameLabel&#34;</span><span class=nt>&gt;</span>What is your name?<span class=nt>&lt;/TextBlock&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;TextBox</span> <span class=na>Name=</span><span class=s>&#34;NameTextBox&#34;</span><span class=nt>&gt;&lt;/TextBox&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;Button</span> <span class=na>Name=</span><span class=s>&#34;GreetButton&#34;</span><span class=nt>&gt;</span>Say Hello!<span class=nt>&lt;/Button&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;TextBlock</span> <span class=na>Name=</span><span class=s>&#34;MessageLabel&#34;</span><span class=nt>&gt;&lt;/TextBlock&gt;</span>
</span></span></code></pre></div><p>Если запустим проект с помощью команды <strong>dotnet run</strong>, то увидим следующее:</p><p>[005]</p><p>В данный момент окно слишком большое, но его размеры можно изменить, задав значения размеров по умолчанию. Изменение свойств окна <strong>Window</strong> будем рассматривать в следующих уроках.</p><h3 id=управление-событием-клика>Управление событием клика</h3><p>Чтобы работать с событием клика, нам нужно сначала добавить обработчик события со следующей сигнатурой внутри класса из файла <em><strong>MainWindow.axaml.cs</strong></em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>GreetButton_Click</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>RoutedEventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Здесь пишем логику обработчика события</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>После чего добавляем строку <strong>using Avalonia.Interactivity;</strong> в этот же файл. Затем изменяем тег Button в XAML, добавив свойство <em><strong>Click</strong></em> с именем метода в качестве значения:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;Button</span> <span class=na>Name=</span><span class=s>&#34;GreetButton&#34;</span> <span class=na>Click=</span><span class=s>&#34;GreetButton_Click&#34;</span><span class=nt>&gt;</span>Say Hello!<span class=nt>&lt;/Button&gt;</span>
</span></span></code></pre></div><h3 id=доступ-к-элементам-управления>Доступ к элементам управления</h3><p>Учитывая, что наш проект использует базовый шаблон Avalonia, нам нужно получить доступ к элементам управления вручную из исходного кода. Внутри метода <strong>GreetButton_Click</strong> напишем следующее:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>GreetButton_Click</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>RoutedEventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>nameControl</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>FindControl</span><span class=p>&lt;</span><span class=n>TextBox</span><span class=p>&gt;(</span><span class=s>&#34;NameTextBox&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>messageControl</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>FindControl</span><span class=p>&lt;</span><span class=n>TextBlock</span><span class=p>&gt;(</span><span class=s>&#34;MessageLabel&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>messageControl</span><span class=p>.</span><span class=n>Text</span> <span class=p>=</span> <span class=s>$&#34;Hello {nameControl.Text} !&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Метод <strong>FindControl<t></strong> позволяет извлекать ссылки на элементы управления из окна.</p><p>В этом примере используем свойство Text для считывания значения из текстового поля и передачи его в Message Label.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=n>messageControl</span><span class=p>.</span><span class=n>Text</span> <span class=p>=</span> <span class=s>$&#34;Hello {nameControl.Text} !&#34;</span><span class=p>;</span>
</span></span></code></pre></div><p>Далее запускаем приложение, введём свое имя и кликаем по кнопке. Появится надпись с приветственным сообщением.</p><p>[006]</p></div><div class=post-taxonomies><div class=post-categories><a class=post-category href=/categories/avalonia/>Avalonia
</a><a class=post-category href=/categories/ubuntu/>Ubuntu</a></div><div class=post-tags><a class=post-tag href=/tags/avalonia/>#Avalonia
</a><a class=post-tag href=/tags/dotnet/>#Dotnet
</a><a class=post-tag href=/tags/ui/>#UI
</a><a class=post-tag href=/tags/c%23/>#C#</a></div></div></article></main><aside class=sidebar><div class=sidebar-card><div class=sidebar-top><div class=site-logo><img src=/images/logo.png alt=Logo></div><h1 class=site-title>Ghost Basenji</h1><p class=site-description>Записки начинающего программиста</p><div class=sidebar-social><a href=mailto:petr.and.vic@gmail.com title=Email target=_blank rel=noopener><i class="fas fa-envelope"></i>
</a><a href=https://t.me/ghostbasenji title=Telegram target=_blank rel=noopener><i class="fab fa-telegram-plane"></i>
</a><a href=https://github.com/GhostBasenji title=GitHub target=_blank rel=noopener><i class="fab fa-github"></i></a></div></div><div class=sidebar-divider></div><nav class=site-nav><ul><li><a href=/>Home</a></li><li><a href=/categories/>Категории</a></li><li><a href=/tags/>Теги</a></li><li><a href=/about/>About</a></li></ul></nav></div></aside></div><footer class=site-footer><div class=footer-divider></div><div class=footer-content><div class=footer-line>©Ghost Basenji, 2026</div><div class=footer-line>Сделано на Hugo
<span class=footer-heart>❤</span>
—
тема
<a href=https://github.com/GhostBasenji/notepadium-nova target=_blank rel=noopener>notepadium-nova</a></div></div></footer><button id=scrollTopBtn title="Go to top">↑</button>
<script src=/js/theme-toggle.js></script><script src=/js/scroll-top.js></script></body></html>